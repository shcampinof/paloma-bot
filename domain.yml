version: '3.1'

intents:
  # Intents b√°sicos
  - saludar
  - despedirse
  - agradecer
  - pedir_ayuda
  - pedir_informacion
  - preguntar_estado
  - responder_bien
  - responder_mal
  - afirmar
  - negar
  - inform 

  # Intents espec√≠ficos de la Defensor√≠a
  - mision
  - vision
  - funciones
  - principios_valores
  - codigo_integridad
  - canales_atencion
  - horarios_atencion
  - linea_telefonica
  - pedir_telefonos
  - pedir_correo

  # PQRSDF y tr√°mites
  - que_es_pqrsdf
  - radicar_peticion
  - plazos_peticiones
  - pedir_plazos_peticion

  # Servicios espec√≠ficos
  - defensoria_publica
  - defensor_publico_requisitos
  - litigio_defensorial
  - mediacion_conciliacion
  - sat_alertas_tempranas
  - participacion_ciudadana
  - gestion_documental

  # Poblaciones espec√≠ficas
  - derechos_infancia
  - denunciar_vulneracion_menor
  - colombianos_exterior
  - atencion_migrantes

  # Otros
  - costo_servicios
  - no_intermediarios
  - trato_digno
  - enfoque_diferencial
  - privacidad_datos
  - organigrama
  - out_of_scope
  - hablar_con_humano
  - consultar_proceso
  - menu
  - faq_menu
  - dar_telefono     

  - faq   # retrieval intent para todas las FAQs


entities: #piezas espec√≠ficas de informaci√≥n que extraes del texto (p. ej., tipo_servicio)
  - ciudad
  - departamento
  - tipo_pqrs
  - canal
  - tipo_servicio
  - nombre
  - numero_identificacion
  - correo_electronico
  - telefono

slots: #  la ‚Äúmemoria‚Äù del bot (variables) donde guardas datos durante la conversaci√≥n; puedes llenarlos directo ‚Äúdesde el texto‚Äù (from_text) u otras fuentes. 
  
  tipo_pqrs:
    type: text
    influence_conversation: false
    mappings:
      - type: from_text
        conditions:
          - active_loop: pqrsdf_form
            requested_slot: tipo_pqrs


  numero_identificacion:
    type: text
    influence_conversation: false
    mappings:
      # Cuando lo pide el form de consulta de proceso
      - type: from_text
        conditions:
          - active_loop: consulta_proceso_form
            requested_slot: numero_identificacion
      # Cuando lo pide el form de PQRSDF
      - type: from_text
        conditions:
          - active_loop: pqrsdf_form
            requested_slot: numero_identificacion

  nombre_contacto:
    type: text
    influence_conversation: false
    mappings:
      - type: from_text
        conditions:
          - active_loop: contacto_form
            requested_slot: nombre_contacto

  telefono_contacto:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: telefono
        conditions:
          - active_loop: pqrsdf_form
            requested_slot: telefono_contacto
      - type: from_text
        conditions:
          - active_loop: pqrsdf_form
            requested_slot: telefono_contacto
  
  ciudad:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: ciudad

  departamento:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: departamento

  canal_preferido:
    type: categorical
    values:
      - presencial
      - virtual
      - telefonico
      - escrito
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: canal

  # Slots para el formulario PQRSDF

  nombre_completo:
    type: text
    influence_conversation: false
    mappings:
      - type: from_text
        conditions:
          - active_loop: pqrsdf_form
            requested_slot: nombre_completo

  correo_contacto:
    type: text
    influence_conversation: false
    mappings:
      - type: from_text
        conditions:
          - active_loop: pqrsdf_form
            requested_slot: correo_contacto

  descripcion_caso:
    type: text
    influence_conversation: false
    mappings:
      - type: from_text
        conditions:
          - active_loop: pqrsdf_form
            requested_slot: descripcion_caso

  medio_notificacion:
    type: text
    influence_conversation: false
    mappings:
      - type: from_text
        conditions:
          - active_loop: pqrsdf_form
            requested_slot: medio_notificacion

responses:

  utter_saludo:
    - text: "¬°Hola! Soy el asistente virtual de la Defensor√≠a del Pueblo de Colombia. ¬øC√≥mo te encuentras el d√≠a de hoy?"

  utter_menu_principal:
    - text: "¬øEn qu√© puedo ayudarte hoy?"
      buttons:
        - title: "CONSULTAR UN PROCESO"     # ‚Üê SIN numeraci√≥n y va primero
          payload: "/consultar_proceso" 
        - title: "1) Radicar o consultar PQRSDF"
          payload: /menu_pqrsdf
        - title: "2) Servicios a la ciudadan√≠a"
          payload: /menu_servicios
        - title: "3) Rutas por poblaci√≥n"
          payload: /menu_poblaciones
        - title: "4) Canales y horarios"
          payload: /menu_canales
        - title: "5) Conoce la Defensor√≠a"
          payload: /menu_entidad
        - title: "6) Trato digno y privacidad"
          payload: /menu_trato

  utter_ask_nombre_contacto:
  - text: "Por favor, indica tu **nombre completo**."

  utter_ask_telefono_contacto:
  - text: "T√∫ **n√∫mero de contacto** por favor (solo d√≠gitos, sin espacios)."

  utter_handoff_ok:
    - text: "Gracias. Un asesor te contactar√° pronto."
  utter_ask_nombre_completo:
    - text: "Indica tu nombre completo."
  utter_ask_correo_contacto:
    - text: "Correo electr√≥nico de contacto."
  utter_ask_telefono_contacto_pqrs:
    - text: "Tel√©fono de contacto (solo d√≠gitos)."
  utter_ask_descripcion_caso:
    - text: "Describe tu caso (m√≠nimo 10 caracteres)."
  utter_pqrsdf_resumen:
    - text: "¬°Solicitud registrada! Te enviaremos confirmaci√≥n por el medio indicado."
  utter_confirmar_llamada:
  - text: "¬°Listo! Un funcionario te contactar√° al **{telefono_contacto}**. Tambi√©n registr√© tu nombre: **{nombre_contacto}**."

  utter_despedida:
    - text: "Gracias por contactar la Defensor√≠a del Pueblo. ¬°Que tengas un buen d√≠a! Recuerda que estamos aqu√≠ para proteger tus derechos."

  utter_agradecimiento:
    - text: "¬°Con gusto! Estoy aqu√≠ para ayudarte con informaci√≥n sobre la Defensor√≠a del Pueblo."

  utter_pedir_ayuda:
    - text: "Estoy aqu√≠ para ayudarte. Puedo brindarte informaci√≥n sobre:\n‚Ä¢ Servicios de la Defensor√≠a\n‚Ä¢ C√≥mo radicar una PQRSDF\n‚Ä¢ Derechos humanos\n‚Ä¢ Canales de atenci√≥n\n¬øSobre qu√© te gustar√≠a saber m√°s?"

  utter_pedir_informacion:
    - text: "Puedo brindarte informaci√≥n sobre los servicios y tr√°mites de la Defensor√≠a del Pueblo. ¬øQu√© te gustar√≠a saber espec√≠ficamente?"

  utter_preguntar_estado:
    - text: "¬°Estoy muy bien, gracias por preguntar! üòä ¬øEn qu√© puedo ayudarte hoy?"
    - text: "¬°Todo perfecto por aqu√≠! ¬øC√≥mo puedo orientarte?"
    - text: "¬°Excelente! Listo para ayudarte. ¬øQu√© necesitas saber?"

  utter_responder_bien:
    - text: "¬°Qu√© bueno escuchar eso! Estoy listo para ayudarte en lo que necesites sobre la Defensor√≠a del Pueblo."

  utter_responder_mal:
    - text: "Lo siento mucho por lo que est√°s pasando. Si necesitas ayuda relacionada con vulneraci√≥n de derechos, puedo orientarte sobre los servicios de la Defensor√≠a."

  utter_funciones:
    - text: "**Funciones principales del Defensor del Pueblo:**\n‚Ä¢ Promover y divulgar derechos humanos\n‚Ä¢ Proteger y defender derechos\n‚Ä¢ Interponer acciones judiciales\n‚Ä¢ Orientar y asesorar\n‚Ä¢ Emitir conceptos y recomendaciones"

  utter_principios_valores:
    - text: "**Principios y valores:**\n‚Ä¢ Autonom√≠a e independencia\n‚Ä¢ Imparcialidad\n‚Ä¢ Equidad\n‚Ä¢ Eficacia\n‚Ä¢ Transparencia\n‚Ä¢ Participaci√≥n\n‚Ä¢ Responsabilidad social"

  utter_codigo_integridad:
    - text: "El **C√≥digo de Integridad** establece los valores y principios √©ticos que orientan el comportamiento de todos los servidores de la Defensor√≠a del Pueblo."

  utter_linea_telefonica:
    - text: "**L√≠neas telef√≥nicas:**\nüìû **Nacional gratuita:** 01 8000 914 814\nüìû **PBX Bogot√°:** (601) 314 40 00\n*Atenci√≥n de lunes a viernes en horario laboral*"

  utter_pedir_telefonos:
    - text: "**N√∫meros telef√≥nicos disponibles:**\n‚Ä¢ L√≠nea nacional: 01 8000 914 814\n‚Ä¢ PBX Bogot√°: (601) 314 40 00\n‚Ä¢ Para sedes regionales espec√≠ficas, consulta nuestro directorio en www.defensoria.gov.co"

  utter_pedir_correo:
    - text: "**Contactos por correo:**\nüìß Informaci√≥n general: defensoria@defensoria.gov.co\nüìß PQRSDF: pqrsdf@defensoria.gov.co\nüìß Tambi√©n puedes contactar sedes espec√≠ficas a trav√©s del portal web"

  utter_mision:
    - text: "**Misi√≥n de la Defensor√≠a del Pueblo:**\n\nSomos la instituci√≥n del Estado colombiano responsable de impulsar la efectividad de los derechos humanos mediante:\n‚Ä¢ Promover, ejercer y divulgar los derechos humanos\n‚Ä¢ Proteger y defender los derechos humanos\n‚Ä¢ Fomentar la observancia del derecho internacional humanitario\n‚Ä¢ Orientar y asesorar en el ejercicio de derechos\n‚Ä¢ Proveer acceso a la justicia"

  utter_vision:
    - text: "**Visi√≥n 2028:**\n\nSer la voz l√≠der, leg√≠tima e independiente que, con el territorio en la base de su acci√≥n, tiende puentes en la diversidad y genera confianza, contribuyendo a transformar derechos en realidades."

  utter_canales_atencion:
    - text: "**Canales de atenci√≥n disponibles:**\n\nüìç **Presencial:** Puntos de atenci√≥n a nivel nacional\nüíª **Virtual:** www.defensoria.gov.co (24/7 para radicar)\nüìû **Telef√≥nico:** 01 8000 914 814 (l√≠neas fijas) / PBX Bogot√°: (601) 314 40 00\nüìù **Escrito:** Ventanillas de radicaci√≥n y buzones PQRSDF\n\n*Las solicitudes se gestionan en d√≠as h√°biles*"

  utter_horarios_atencion:
    - text: "**Horarios generales:** \n ‚Ä¢ Atenci√≥n presencial: Lunes a viernes, generalmente de 8:00 a.m. a 5:00 p.m.\n‚Ä¢ Portal web: Disponible 24/7 para radicar peticiones\n‚Ä¢ Los horarios pueden variar por sede regional\n\n¬øNecesitas el horario espec√≠fico de alguna ciudad?"

  utter_que_es_pqrsdf:
    - text: >
        Las PQRSDF son los mecanismos para comunicarte con la Defensor√≠a:
        Peticiones, Quejas, Reclamos, Sugerencias, Denuncias y Felicitaciones.
        ¬øQu√© deseas hacer?
      buttons:
        - title: Radicar una solicitud
          payload: /radicar_peticion
        - title: Canales y horarios
          payload: /canales_atencion
        - title: Plazos de respuesta
          payload: /pedir_plazos_peticion

  utter_faq_intro:
    - text: |
        Escribe tu pregunta en lenguaje natural y te respondo al instante.
        Ejemplos: 
        ‚Ä¢ ‚Äú¬øQu√© es la participaci√≥n ciudadana?‚Äù 
        ‚Ä¢ ‚Äú¬øC√≥mo presento una PQRSDF?‚Äù
        ‚Ä¢ ‚Äú¬øQu√© son las Alertas Tempranas?‚Äù

  utter_ask_numero_identificacion:
    - text: "Por favor, ingresa el **n√∫mero de identificaci√≥n** sin comas ni puntos (solo d√≠gitos)."

  utter_radicar_peticion:
    - text: "**¬øC√≥mo radicar una petici√≥n?**\n\n1. **Portal web:** www.defensoria.gov.co ‚Üí 'Radique su petici√≥n aqu√≠'\n2. **Presencial:** En cualquier punto de atenci√≥n\n3. **Telef√≥nico:** 01 8000 914 814\n4. **Escrito:** Ventanillas de correspondencia\n\n¬øTe gustar√≠a que te ayude a tomar los datos para orientarte?"

  utter_plazos_peticion:
    - text: "**Plazos de respuesta (d√≠as h√°biles):**\n‚Ä¢ Petici√≥n general: 15 d√≠as\n‚Ä¢ Documentos/informaci√≥n: 10 d√≠as\n‚Ä¢ Entre autoridades: 10 d√≠as\n‚Ä¢ Congresistas: 5 d√≠as\n‚Ä¢ Consultas: 30 d√≠as\n\nRecibir√°s n√∫mero de radicado para hacer seguimiento."

  utter_defensoria_publica:
    - text: "**Defensor√≠a P√∫blica:** Representaci√≥n judicial GRATUITA para personas en situaci√≥n de vulnerabilidad econ√≥mica.\n\n**√Åreas:** Penal, civil, familia, laboral, administrativo, restituci√≥n de tierras.\n\n**Requisitos:** Imposibilidad econ√≥mica y necesidad del proceso.\n\n¬øNecesitas orientaci√≥n para solicitar este servicio?"

  utter_costo_servicios:
    - text: "üÜì **TODOS los servicios de la Defensor√≠a del Pueblo son GRATUITOS**\n\n‚ùå **NO requieres intermediarios**\n‚ùå **NO pagues a terceros**\n\nSi alguien te pide dinero por estos servicios, rep√≥rtalo inmediatamente."

  utter_derechos_infancia:
    - text: "**Derechos fundamentales de ni√±as, ni√±os y adolescentes:**\n‚Ä¢ Vida, salud y educaci√≥n\n‚Ä¢ Identidad y familia\n‚Ä¢ Integridad personal y protecci√≥n\n‚Ä¢ Participaci√≥n y libre expresi√≥n\n‚Ä¢ Recreaci√≥n y cultura\n\n¬øNecesitas reportar una situaci√≥n espec√≠fica?"

  utter_out_of_scope:
    - text: "Puedo ayudarte con informaci√≥n sobre la Defensor√≠a del Pueblo, sus servicios y tr√°mites. Para consultas espec√≠ficas fuera de mi conocimiento, te sugiero contactar directamente a la entidad."

  utter_handoff_humano:
    - text: "Te voy a conectar con un funcionario de la Defensor√≠a del Pueblo para que pueda atenderte personalmente. Por favor mant√©n a la mano tus datos de contacto."

  # Preguntas para el formulario
  utter_ask_tipo_pqrs:
  - text: "¬øQu√© tipo de solicitud deseas radicar?"
    buttons:
      - title: "Petici√≥n"
        payload: "Petici√≥n"
      - title: "Queja"
        payload: "Queja"
      - title: "Reclamo"
        payload: "Reclamo"
      - title: "Sugerencia"
        payload: "Sugerencia"
      - title: "Denuncia"
        payload: "Denuncia"
      - title: "Felicitaci√≥n"
        payload: "Felicitaci√≥n"

  utter_ask_medio_notificacion:
  - text: "¬øC√≥mo prefieres recibir la respuesta?"
    buttons:
      - title: "Por correo electr√≥nico"
        payload: "Correo"
      - title: "Por tel√©fono"
        payload: "Tel√©fono"
      # Si realmente lo ofreces, deja esta. Si no, elim√≠nala.
      - title: "Notificaci√≥n f√≠sica"
        payload: "Notificaci√≥n f√≠sica"

  utter_confirmar_pqrs:
    - text: "Perfecto. Con esta informaci√≥n podr√°s radicar tu solicitud a trav√©s del canal que prefieras. Recibir√°s un n√∫mero de radicado y respuesta en los plazos legales establecidos."

  utter_faq/participacion_que_es:
    - text: |
        La **participaci√≥n ciudadana** es el derecho de las personas a intervenir en las decisiones p√∫blicas y en el uso de los recursos que afectan a su comunidad. Permite llevar propuestas y control a distintos niveles del Estado.
        Pol√≠tica de participaci√≥n: https://www.defensoria.gov.co/documents/20123/1259041/Politica-participacion-ciudadana2022.pdf/75108ff0-3399-7f2c-114e-f865b8b55f2c

  utter_faq/participacion_mecanismos_que_son:
    - text: |
        Los **mecanismos de participaci√≥n** materializan ese derecho y permiten a la ciudadan√≠a intervenir en la conformaci√≥n, ejercicio y control del poder pol√≠tico (planes, decisiones, seguimiento y control social).

  utter_faq/participacion_mecanismos_lista:
    - text: |
        Principales mecanismos:
        ‚Ä¢ Diagn√≥stico de necesidades
        ‚Ä¢ Planeaci√≥n y presupuesto participativo
        ‚Ä¢ Consulta ciudadana
        ‚Ä¢ Colaboraci√≥n e innovaci√≥n abierta
        ‚Ä¢ Rendici√≥n de cuentas
        ‚Ä¢ Control social
        M√°s info: https://www.defensoria.gov.co/participacion-ciudadana

  utter_faq/infancia_derechos:
    - text: |
        **Derechos relevantes de la ni√±ez:** vida; integridad y protecci√≥n; identidad; familia; salud; educaci√≥n; libertad (asociaci√≥n y reuni√≥n pac√≠fica); debido proceso y resocializaci√≥n; custodia, cuidado y alimentos; intimidad; informaci√≥n.

  utter_faq/infancia_reportar_vulneracion:
    - text: |
        Si sospechas vulneraci√≥n de derechos de un/a menor, rep√≥rtalo aqu√≠:
        http://eliseo.defensoria.gov.co/visionweb/cac2/web_preconsulta.php

  utter_faq/gestion_documental_que_es:
    - text: |
        La **gesti√≥n documental** es el conjunto de actividades para planear, organizar, custodiar y disponer la documentaci√≥n de la Entidad desde su creaci√≥n hasta su destino final. Programa de Gesti√≥n Documental:
        https://www.defensoria.gov.co/programa-gestion-documental

  utter_faq/pqrsdf_como_presentar:
    - text: |
        Puedes presentar **PQRSDF** por:
        ‚Ä¢ En l√≠nea (24/7) en www.defensoria.gov.co ‚Üí Atenci√≥n al Ciudadano
        ‚Ä¢ Telef√≥nico: Bogot√° (601) 314 73 00, L√≠nea gratuita 01 8000 914 814
        ‚Ä¢ Presencial: oficinas de atenci√≥n al ciudadano (ver directorio en el sitio web)
        ‚Ä¢ Correspondencia
        Te orientamos por todos los canales.

  utter_faq/defensoria_que_es:
  - text: |
      La Defensor√≠a del Pueblo es una entidad del Estado colombiano encargada de velar por la promoci√≥n, defensa y divulgaci√≥n de los derechos humanos, con especial √©nfasis en las poblaciones m√°s vulnerables.

  utter_faq/defensoria_funcion_principal:
  - text: |
      Su funci√≥n principal es la defensa, promoci√≥n y divulgaci√≥n de los derechos humanos y del Derecho Internacional Humanitario en Colombia.

  utter_faq/defensoria_autonomia:
  - text: |
      No. Aunque es una entidad estatal, la Defensor√≠a del Pueblo es aut√≥noma e independiente del Gobierno Nacional.

  utter_faq/servicios_que_presta:
  - text: |
      La Defensor√≠a presta, entre otros, estos servicios:
      ‚Ä¢ Orientaci√≥n jur√≠dica gratuita.
      ‚Ä¢ Atenci√≥n a v√≠ctimas del conflicto armado.
      ‚Ä¢ Protecci√≥n de derechos fundamentales (incluye apoyo en tutelas).
      ‚Ä¢ Acompa√±amiento a grupos en vulnerabilidad (mujeres, NNA, personas LGBTIQ+, ind√≠genas, migrantes, etc.).
      ‚Ä¢ Emisi√≥n y seguimiento de Alertas Tempranas (SAT).
      Para saber m√°s: www.defensoria.gov.co

  utter_faq/publicaciones_donde:
  - text: |
      Puedes consultar boletines, informes y estudios en la secci√≥n ‚ÄúPublicaciones‚Äù del sitio web oficial:
      www.defensoria.gov.co (men√∫ Publicaciones).

  utter_faq/contacto_lineas:
  - text: |
      Canales de contacto:
      ‚Ä¢ L√≠nea nacional gratuita: 01 8000 914 814
      ‚Ä¢ Bogot√°: (601) 314 7300
      ‚Ä¢ Correo: atencionalciudadano@defensoria.gov.co
      ‚Ä¢ Presencial: 42 Defensor√≠as Regionales (consulta la sede m√°s cercana en el sitio web).

forms:
  pqrsdf_form:
    required_slots:
      - tipo_pqrs
      - nombre_completo
      - numero_identificacion
      - correo_contacto
      - telefono_contacto  # Incluir telefono_contacto si tiene mapping
      - descripcion_caso
      - medio_notificacion

  contacto_form:
    required_slots:
      - nombre_contacto
      - telefono_contacto

  consulta_proceso_form:
    required_slots:
      - numero_identificacion

actions:
  - action_lookup_cedula  
  - action_default_fallback
  - action_buscar_regional
  - action_handoff
  - validate_contacto_form
  - validate_pqrsdf_form
  - action_reset_pqrs_slots

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
